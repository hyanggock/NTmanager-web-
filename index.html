<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content='"width=device-width, initial-scale=1, shrink-to-fit=no"'>
  <link href="css/style.css" rel="stylesheet">
  <script>
    var database;
    var numofdatas = [];

  </script>

</head>

<body>
  <script>
    varnum = numofdatas[0];
  </script>

  <div class="tab-area">
    <input type="radio" name="tabs" id="tab1" checked>
    <label for="tab1">교육재정-노-</label>
    <input type="radio" name="tabs" id="tab2">
    <label for="tab2">지식정보-노-</label>
    <input type="radio" name="tabs" id="tab3">
    <label for="tab3">NB2104</label>
    <input type="radio" name="tabs" id="tab4">
    <label for="tab4">NB2203</label>
    <div id="content1" class="tab-content red">
      <h1>교육재정-노-</h1>
      <div class="flex-contanier.row" id="교육재정-노-">
        데이터 받아오는중..
      </div>
    </div>
    <div id="content2" class="tab-content blue">
      <h1>지식정보-노-</h1>
      <div class="flex-contanier.row" id="지식정보-노-">
        데이터 받아오는중..
      </div>
    </div>
    <div id="content3" class="tab-content green">
      <h1>NB2104</h1>
      <div class="flex-contanier.row" id="NB2104">
        데이터 받아오는중..
      </div>
    </div>
    <div id="content4" class="tab-content yellow">
      <h1>NB2203</h1>
      <div class="flex-contanier.row" id="NB2203" style="background-color: rgb(176, 255, 197);">
        데이터 받아오는중..
      </div>
    </div>
  </div>
</body>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.1/firebase-app.js";
  import { getDatabase, ref, child, set, get, onValue } from 'https://www.gstatic.com/firebasejs/9.1.1/firebase-database.js';
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAOqv98aE8azlDirDTzJL1OECLHhKwXLWA",
    authDomain: "ntmanagerdb.firebaseapp.com",
    databaseURL: "https://ntmanagerdb-default-rtdb.firebaseio.com",
    projectId: "ntmanagerdb",
    storageBucket: "ntmanagerdb.appspot.com",
    messagingSenderId: "864743611198",
    appId: "1:864743611198:web:fc0191b11bf693bbce6a6f",
    measurementId: "G-0TEJYZKVQ1"
  };
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  database = getDatabase(app);


  function getnumdata(input) {
    var tempdatas = 0;
    onValue(ref(database, input), (snapData) => {
      tempdatas = (Object.keys(snapData.val()).length);
      console.log(snapData.child('1' + '/notebookstatus').val().toString());
      document.getElementById(input).innerHTML = '';
      for (i = 1; i <= tempdatas; i++) {
        if (snapData.child(i + '/notebookstatus').val().toString() == "standby") {
          document.getElementById(input).innerHTML += '<div class=notebtn id=js-n' + i + '; ' + 'style="border: 1px solid black; background-color: rgb(176, 255, 197); height:50px; width:19%; padding: 0.1%; margin:0.1% 0.1% 0.5% 0.1%; text-align:center; float:left;">' + i + '<br>준비됨' + '</div>\n';
        }
        else if (snapData.child(i + '/notebookstatus').val().toString() == "processing") {
          document.getElementById(input).innerHTML += '<div class=notebtn id=js-n' + i + '; ' + 'style="border: 1px solid black; background-color: rgb(255, 204, 132); height:50px; width:19%; padding: 0.1%; margin:0.1% 0.1% 0.5% 0.1%; text-align:center; float:left;">' + i + '<br>작업중..' + '</div>\n';
        }
        else if (snapData.child(i + '/notebookstatus').val().toString() == "rentaled") {
          document.getElementById(input).innerHTML += '<div class=notebtn id=js-n' + i + '; ' + 'style="border: 1px solid black; color: white; background-color: rgb(62, 53, 65); height:50px; width:19%; padding: 0.1%; margin:0.1% 0.1% 0.5% 0.1%; text-align:center; float:left;">' + i + '<br>대여중' + '</div>\n';
        }
        else
        {
          document.getElementById(input).innerHTML += '<div class=notebtn id=js-n' + i + '; ' + 'style="border: 1px solid black; background-color: red; height:50px; width:19%; padding: 0.1%; margin:0.1% 0.1% 0.5% 0.1%; text-align:center; float:left;">' + i + '<br>오류' + '</div>\n';
        }
      }
      return tempdatas;
    });
  }
  numofdatas[0] = getnumdata('교육재정-노-');
  numofdatas[1] = getnumdata('지식정보-노-');
  numofdatas[2] = getnumdata('NB2104');
  numofdatas[3] = getnumdata('NB2203');
  var i;

  for (i = 0; i < 4; i++) {
    console.log(numofdatas[i]);
  }

</script>

</html>
